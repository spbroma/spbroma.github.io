clc
clearvars

data = [
[55.81260072141402,37.55117277748898,33];
[55.81260072141402,37.559155333116735,30];
[55.81260072141402,37.56713788874449,26];
[55.81260072141402,37.575120444372246,21];
[55.81260072141402,37.583103,25];
[55.81260072141402,37.59108555562776,21];
[55.81260072141402,37.59906811125551,22];
[55.81260072141402,37.60705066688327,22];
[55.81260072141402,37.61503322251102,30];
[55.81709150623727,37.543190221861224,34];
[55.81709150623727,37.55117277748898,39];
[55.81709150623727,37.559155333116735,28];
[55.81709150623727,37.56713788874449,21];
[55.81709150623727,37.575120444372246,16];
[55.81709150623727,37.583103,24];
[55.81709150623727,37.59108555562776,20];
[55.81709150623727,37.59906811125551,22];
[55.81709150623727,37.60705066688327,26];
[55.81709150623727,37.61503322251102,25];
[55.81709150623727,37.62301577813878,27];
[55.821582291060516,37.53520766623347,36];
[55.821582291060516,37.543190221861224,41];
[55.821582291060516,37.55117277748898,30];
[55.821582291060516,37.559155333116735,26];
[55.821582291060516,37.56713788874449,22];
[55.821582291060516,37.575120444372246,13];
[55.821582291060516,37.583103,17];
[55.821582291060516,37.59108555562776,19];
[55.821582291060516,37.59906811125551,19];
[55.821582291060516,37.60705066688327,17];
[55.821582291060516,37.61503322251102,18];
[55.821582291060516,37.62301577813878,21];
[55.821582291060516,37.630998333766534,23];
[55.82607307588376,37.52722511060571,31];
[55.82607307588376,37.53520766623347,35];
[55.82607307588376,37.543190221861224,40];
[55.82607307588376,37.55117277748898,33];
[55.82607307588376,37.559155333116735,46];
[55.82607307588376,37.56713788874449,24];
[55.82607307588376,37.575120444372246,18];
[55.82607307588376,37.583103,13];
[55.82607307588376,37.59108555562776,22];
[55.82607307588376,37.59906811125551,18];
[55.82607307588376,37.60705066688327,19];
[55.82607307588376,37.61503322251102,24];
[55.82607307588376,37.62301577813878,28];
[55.82607307588376,37.630998333766534,29];
[55.82607307588376,37.63898088939429,31];
[55.83056386070701,37.51924255497796,32];
[55.83056386070701,37.52722511060571,35];
[55.83056386070701,37.53520766623347,31];
[55.83056386070701,37.543190221861224,39];
[55.83056386070701,37.55117277748898,34];
[55.83056386070701,37.559155333116735,26];
[55.83056386070701,37.56713788874449,18];
[55.83056386070701,37.575120444372246,17];
[55.83056386070701,37.583103,21];
[55.83056386070701,37.59108555562776,16];
[55.83056386070701,37.59906811125551,13];
[55.83056386070701,37.60705066688327,19];
[55.83056386070701,37.61503322251102,26];
[55.83056386070701,37.62301577813878,35];
[55.83056386070701,37.630998333766534,34];
[55.83056386070701,37.63898088939429,30];
[55.83056386070701,37.646963445022045,26];
[55.835054645530256,37.51924255497796,26];
[55.835054645530256,37.52722511060571,27];
[55.835054645530256,37.53520766623347,28];
[55.835054645530256,37.543190221861224,27];
[55.835054645530256,37.55117277748898,30];
[55.835054645530256,37.559155333116735,25];
[55.835054645530256,37.56713788874449,17];
[55.835054645530256,37.575120444372246,15];
[55.835054645530256,37.583103,16];
[55.835054645530256,37.59108555562776,16];
[55.835054645530256,37.59906811125551,14];
[55.835054645530256,37.60705066688327,19];
[55.835054645530256,37.61503322251102,26];
[55.835054645530256,37.62301577813878,35];
[55.835054645530256,37.630998333766534,31];
[55.835054645530256,37.63898088939429,27];
[55.835054645530256,37.646963445022045,31];
[55.8395454303535,37.51924255497796,22];
[55.8395454303535,37.52722511060571,22];
[55.8395454303535,37.53520766623347,31];
[55.8395454303535,37.543190221861224,26];
[55.8395454303535,37.55117277748898,23];
[55.8395454303535,37.559155333116735,36];
[55.8395454303535,37.56713788874449,25];
[55.8395454303535,37.575120444372246,14];
[55.8395454303535,37.583103,12];
[55.8395454303535,37.59108555562776,9];
[55.8395454303535,37.59906811125551,19];
[55.8395454303535,37.60705066688327,25];
[55.8395454303535,37.61503322251102,29];
[55.8395454303535,37.62301577813878,25];
[55.8395454303535,37.630998333766534,27];
[55.8395454303535,37.63898088939429,25];
[55.8395454303535,37.646963445022045,29];
[55.84403621517675,37.51924255497796,25];
[55.84403621517675,37.52722511060571,30];
[55.84403621517675,37.53520766623347,31];
[55.84403621517675,37.543190221861224,26];
[55.84403621517675,37.55117277748898,21];
[55.84403621517675,37.559155333116735,18];
[55.84403621517675,37.56713788874449,15];
[55.84403621517675,37.575120444372246,4];
[55.84403621517675,37.583103,10];
[55.84403621517675,37.59108555562776,10];
[55.84403621517675,37.59906811125551,14];
[55.84403621517675,37.60705066688327,24];
[55.84403621517675,37.61503322251102,24];
[55.84403621517675,37.62301577813878,18];
[55.84403621517675,37.630998333766534,19];
[55.84403621517675,37.63898088939429,28];
[55.84403621517675,37.646963445022045,22];
[55.848527,37.51924255497796,32];
[55.848527,37.52722511060571,37];
[55.848527,37.53520766623347,34];
[55.848527,37.543190221861224,27];
[55.848527,37.55117277748898,16];
[55.848527,37.559155333116735,18];
[55.848527,37.56713788874449,14];
[55.848527,37.575120444372246,1];
[55.848527,37.59108555562776,1];
[55.848527,37.59906811125551,8];
[55.848527,37.60705066688327,15];
[55.848527,37.61503322251102,12];
[55.848527,37.62301577813878,13];
[55.848527,37.630998333766534,23];
[55.848527,37.63898088939429,21];
[55.848527,37.646963445022045,23];
[55.853017784823244,37.51924255497796,32];
[55.853017784823244,37.52722511060571,37];
[55.853017784823244,37.53520766623347,32];
[55.853017784823244,37.543190221861224,27];
[55.853017784823244,37.55117277748898,23];
[55.853017784823244,37.559155333116735,18];
[55.853017784823244,37.56713788874449,14];
[55.853017784823244,37.575120444372246,7];
[55.853017784823244,37.583103,3];
[55.853017784823244,37.59108555562776,5];
[55.853017784823244,37.59906811125551,8];
[55.853017784823244,37.60705066688327,9];
[55.853017784823244,37.61503322251102,12];
[55.853017784823244,37.62301577813878,27];
[55.853017784823244,37.630998333766534,22];
[55.853017784823244,37.63898088939429,27];
[55.853017784823244,37.646963445022045,37];
[55.85750856964649,37.51924255497796,33];
[55.85750856964649,37.52722511060571,46];
[55.85750856964649,37.53520766623347,29];
[55.85750856964649,37.543190221861224,27];
[55.85750856964649,37.55117277748898,21];
[55.85750856964649,37.559155333116735,20];
[55.85750856964649,37.56713788874449,19];
[55.85750856964649,37.575120444372246,12];
[55.85750856964649,37.583103,3];
[55.85750856964649,37.59108555562776,8];
[55.85750856964649,37.59906811125551,15];
[55.85750856964649,37.60705066688327,18];
[55.85750856964649,37.61503322251102,21];
[55.85750856964649,37.62301577813878,20];
[55.85750856964649,37.630998333766534,27];
[55.85750856964649,37.63898088939429,33];
[55.85750856964649,37.646963445022045,32];
[55.86199935446974,37.51924255497796,22];
[55.86199935446974,37.52722511060571,31];
[55.86199935446974,37.53520766623347,27];
[55.86199935446974,37.543190221861224,30];
[55.86199935446974,37.55117277748898,18];
[55.86199935446974,37.559155333116735,19];
[55.86199935446974,37.56713788874449,19];
[55.86199935446974,37.575120444372246,11];
[55.86199935446974,37.583103,5];
[55.86199935446974,37.59108555562776,13];
[55.86199935446974,37.59906811125551,13];
[55.86199935446974,37.60705066688327,12];
[55.86199935446974,37.61503322251102,17];
[55.86199935446974,37.62301577813878,21];
[55.86199935446974,37.630998333766534,38];
[55.86199935446974,37.63898088939429,31];
[55.86199935446974,37.646963445022045,34];
[55.866490139292985,37.51924255497796,35];
[55.866490139292985,37.52722511060571,30];
[55.866490139292985,37.53520766623347,26];
[55.866490139292985,37.543190221861224,22];
[55.866490139292985,37.55117277748898,23];
[55.866490139292985,37.559155333116735,21];
[55.866490139292985,37.56713788874449,17];
[55.866490139292985,37.575120444372246,12];
[55.866490139292985,37.583103,7];
[55.866490139292985,37.59108555562776,12];
[55.866490139292985,37.59906811125551,14];
[55.866490139292985,37.60705066688327,13];
[55.866490139292985,37.61503322251102,20];
[55.866490139292985,37.62301577813878,23];
[55.866490139292985,37.630998333766534,26];
[55.866490139292985,37.63898088939429,31];
[55.866490139292985,37.646963445022045,33];
[55.87098092411623,37.52722511060571,27];
[55.87098092411623,37.53520766623347,25];
[55.87098092411623,37.543190221861224,23];
[55.87098092411623,37.55117277748898,24];
[55.87098092411623,37.559155333116735,22];
[55.87098092411623,37.56713788874449,20];
[55.87098092411623,37.575120444372246,15];
[55.87098092411623,37.583103,10];
[55.87098092411623,37.59108555562776,14];
[55.87098092411623,37.59906811125551,22];
[55.87098092411623,37.60705066688327,21];
[55.87098092411623,37.61503322251102,24];
[55.87098092411623,37.62301577813878,27];
[55.87098092411623,37.630998333766534,23];
[55.87098092411623,37.63898088939429,27];
[55.87547170893948,37.53520766623347,24];
[55.87547170893948,37.543190221861224,26];
[55.87547170893948,37.55117277748898,25];
[55.87547170893948,37.559155333116735,26];
[55.87547170893948,37.56713788874449,23];
[55.87547170893948,37.575120444372246,13];
[55.87547170893948,37.583103,17];
[55.87547170893948,37.59108555562776,24];
[55.87547170893948,37.59906811125551,23];
[55.87547170893948,37.60705066688327,29];
[55.87547170893948,37.61503322251102,29];
[55.87547170893948,37.62301577813878,32];
[55.87547170893948,37.630998333766534,30];
[55.879962493762726,37.543190221861224,26];
[55.879962493762726,37.55117277748898,22];
[55.879962493762726,37.559155333116735,28];
[55.879962493762726,37.56713788874449,17];
[55.879962493762726,37.575120444372246,22];
[55.879962493762726,37.583103,16];
[55.879962493762726,37.59108555562776,21];
[55.879962493762726,37.59906811125551,19];
[55.879962493762726,37.60705066688327,24];
[55.879962493762726,37.61503322251102,36];
[55.879962493762726,37.62301577813878,36];
[55.88445327858597,37.55117277748898,26];
[55.88445327858597,37.559155333116735,23];
[55.88445327858597,37.56713788874449,26];
[55.88445327858597,37.575120444372246,17];
[55.88445327858597,37.583103,23];
[55.88445327858597,37.59108555562776,23];
[55.88445327858597,37.59906811125551,14];
[55.88445327858597,37.60705066688327,22];
[55.88445327858597,37.61503322251102,15]];
N = length(data);
x = data(:, 1);
y = data(:, 2);
z = data(:, 3);

X = unique(x);
Y = unique(y);
XY = meshgrid(X,Y);
Z = zeros(length(X), length(Y))';

maxVal = max(z);

for yi = 1:length(Y)
    for xi = 1:length(X)
        for i = 1:length(data)
            if((data(i,1) == X(xi)) && (data(i,2) == Y(yi)))
                Z(yi,length(X)-xi+1) = maxVal - data(i,3);
%                 Z(yi,length(X)-xi+1) = data(i,3);
                disp([xi, yi, i, data(i,1), x(xi), data(i,2), y(yi), data(i,3)])
            end
        end        
    end
end

image(Y,X,Z')
colormap hot
        

% C = [7 1 4 6; 1 1 12 1; 16 18 2000 2200];
% image(a)
 